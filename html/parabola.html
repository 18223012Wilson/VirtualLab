<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Lab: Gerak Parabola</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Virtual Lab: Fisika</h1>
            <nav>
                <a href="home.html"><button id="nav-home">Beranda</button></a>
                <a href="quiz.html"><button id="nav-quiz">Quiz</button></a>
                <a href="profile.html"><button id="nav-profile">Profil</button></a>
                <button id="logoutBtn">Logout</button>
            </nav>
        </div>
    </header>

    <main>
        <!-- Tampilan Lab Gerak Parabola -->
        <section id="parabola-lab-view" class="view-container lab-layout">
            <h2 class="lab-title">Gerak Parabola</h2>
            <p class="lab-subtitle">Gerak parabola adalah gerak yang terdiri dari dua komponen kecepatan (kecepatan sumbu-x dan sumbu-y) dan seluruh lintasannya dipengaruhi oleh gaya gravitasi.</p>
            <p class="lab-subtitle">Pada gerak parabola, benda akan bergerak mengikuti lintasan melengkung akibat pengaruh gravitasi. Kecepatan benda pada sumbu-x akan konstan karena tidak ada gaya yang mempengaruhi arahnya. Sementara itu, kecepatan benda pada sumbu-y akan mengalami GLBB diperlambat akibat pengaruh percepatan gravitasi.</p>
            
            <p class="lab-text">Berikut ini adalah besaran-besaran dalam gerak parabola:</p>
            <ul>
                <li class="lab-list">Kecepatan awal (v₀) dan sudut elevasi (θ) menentukan lintasan</li>
                <li class="lab-list">Jangkauan maksimum, tinggi maksimum, dan waktu total dapat dihitung secara teoritis</li>
            </ul>

            <h2 class="lab-title">Rumus-Rumus Gerak Parabola</h2>
            <p class="lab-subtitle">Berikut adalah rumus-rumus yang berkaitan dengan Gerak Parabola:</p>
            <br>
            
            <p class="lab-list"><strong>Rumus ketinggian maksimum:</strong></p>
            <div class="lab-image-container">
                <img src="../asset/parabola2.png" alt="Rumus Ketinggian Maksimum" width="40%">
            </div>
            
            <p class="lab-list"><strong>Rumus jangkauan maksimum:</strong></p>
            <div class="lab-image-container">
                <img src="../asset/parabola3.png" alt="Rumus Jangkauan Maksimum" width="80%">
            </div>
            
            <p class="lab-list"><strong>Rumus waktu yang dibutuhkan:</strong></p>
            <div class="lab-image-container">
                <img src="../asset/parabola4.png" alt="Rumus Waktu" width="40%">
            </div>

            <h2 class="lab-title">Contoh Penerapan</h2>
            <p class="lab-subtitle">Menendang bola: ketika kita menendang sepak bola ke gawang, maka bola akan melambung membentuk lintasan parabola sebelum jatuh ke permukaan jika ditendang dengan sudut elevasi tertentu.</p>
            <div class="lab-apply-image-container">
                <img src="../asset/parabola_tendang.png" alt="Contoh Penerapan Gerak Parabola" width="50%">
            </div>

            <h2 class="lab-title">Lab Gerak Parabola</h2>
            <p class="lab-subtitle">Simulasikan lintasan proyektil (peluru) yang dipengaruhi oleh gravitasi dengan mengubah kecepatan awal (v₀) dan sudut elevasi (θ).</p>

            <div class="main-grid">
                <!-- Kolom Kiri: Kontrol dan Hasil -->
                <div>
                    <section id="controls" class="card">
                        <h2>Parameter Awal</h2>
                        
                        <div class="input-group">
                            <label for="velocity">Kecepatan Awal (v₀):</label>
                            <input type="range" id="velocity" min="10" max="100" value="10" step="1"> 
                            <span id="velocityValue" class="value-display">10 m/s</span>
                        </div>

                        <div class="input-group">
                            <label for="angle">Sudut Elevasi (θ):</label>
                            <input type="range" id="angle" min="15" max="90" value="15" step="1">
                            <span id="angleValue" class="value-display">15°</span>
                        </div>

                        <div class="button-group">
                            <button id="startButton">Mulai Simulasi</button>
                        </div>
                    </section>

                    <section id="results" class="card">
                        <h2>Hasil Perhitungan</h2>
                        <p>Tinggi Maksimum (h_max): <span id="hmax_output">0.00</span> m</p>
                        <p>Jangkauan Maksimum (x_max): <span id="xmax_output">0.00</span> m</p>
                        <p>Waktu Total (T_total): <span id="ttotal_output">0.00</span> s</p>
                    </section>
                </div>

                <!-- Kolom Kanan: Visualisasi -->
                <section id="visualization" class="card">
                    <h2>Visualisasi Gerak</h2>
                    <canvas id="parabolaCanvas" width="800" height="450"></canvas>
                </section>
            </div>
        </section>
    </main>

    <footer>
        <p>G = 9.8 m/s² (Konstanta Gravitasi)</p>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/user_data.js"></script>
    <script src="../js/parabola_script.js"></script>
    <script>
        // Proteksi halaman - redirect ke login jika belum login
        VirtualLabAuth.requireAuth();
        
        // Logout functionality
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', async () => {
                const confirmed = confirm('Apakah Anda yakin ingin logout?');
                if (!confirmed) return;
                
                logoutBtn.disabled = true;
                logoutBtn.textContent = 'Logging out...';
                
                try {
                    const result = await VirtualLabAuth.logout();
                    if (result.success) {
                        window.location.href = 'login.html';
                    }
                } catch (error) {
                    console.error('Logout error:', error);
                    alert('Gagal logout. Silakan coba lagi.');
                    logoutBtn.disabled = false;
                    logoutBtn.textContent = 'Logout';
                }
            });
        }
    </script>
</body>
</html>
